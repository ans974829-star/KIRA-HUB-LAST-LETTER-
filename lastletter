-- ğŸ”¥ KIRA HUB [Last Letter] v3.2 â€” ABSOLUTE FINAL EDITION ğŸ”¥
-- Made by KIRA
-- YouTube: https://youtube.com/@kira_0001
-- Discord: https://discord.gg/ZH48pK5wen

if not game:IsLoaded() then
    game.Loaded:Wait()
end

-- Services
local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local LogService = game:GetService("LogService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Clean up old GUI
local env = getgenv() or _G
if env and env.KiraLastLetterV32 then
    local foundGui = CoreGui:FindFirstChild(env.KiraLastLetterV32)
    if foundGui then foundGui:Destroy() end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ”‘ KEY SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local VALID_KEY = "HEYINEEDTHEKEYMAN"
local DISCORD_LINK = "https://discord.gg/ZH48pK5wen"
local YOUTUBE_LINK = "https://youtube.com/@kira_0001"
local KeyVerified = false

-- Check saved key
local SavedKey = nil
pcall(function()
    if isfile and isfile("KiraLastLetterKey.txt") then
        SavedKey = readfile("KiraLastLetterKey.txt")
    end
end)

-- Key System GUI with safe checks
local KeyGui
local guiOk, guiErr = pcall(function()
    KeyGui = Instance.new("ScreenGui")
    KeyGui.Name = "KiraKeySystem_" .. math.random(100000, 999999)
    KeyGui.ResetOnSpawn = false
    KeyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    KeyGui.IgnoreGuiInset = true
    KeyGui.Parent = CoreGui or playerGui  -- Fallback to playerGui if CoreGui fails
end)
if not guiOk then
    StarterGui:SetCore("SendNotification", {
        Title = "KIRA Key Error",
        Text = "Failed to create Key GUI: " .. tostring(guiErr) .. ". Try different executor.",
        Duration = 10
    })
    return
end

-- Background Blur
local BlurFrame = Instance.new("Frame")
BlurFrame.Size = UDim2.new(1, 0, 1, 0)
BlurFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
BlurFrame.BackgroundTransparency = 0.4
BlurFrame.BorderSizePixel = 0
BlurFrame.Parent = KeyGui

-- Key Panel
local KeyPanel = Instance.new("Frame")
KeyPanel.Size = UDim2.new(0, 420, 0, 480)
KeyPanel.Position = UDim2.new(0.5, -210, 0.5, -240)
KeyPanel.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
KeyPanel.BorderSizePixel = 0
KeyPanel.BackgroundTransparency = 1
KeyPanel.Parent = KeyGui

Instance.new("UICorner", KeyPanel).CornerRadius = UDim.new(0, 16)

local KeyStroke = Instance.new("UIStroke")
KeyStroke.Color = Color3.fromRGB(180, 0, 40)
KeyStroke.Thickness = 3
KeyStroke.Transparency = 1
KeyStroke.Parent = KeyPanel

-- Glow
local KeyGlow = Instance.new("ImageLabel")
KeyGlow.Size = UDim2.new(1, 80, 1, 80)
KeyGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
KeyGlow.AnchorPoint = Vector2.new(0.5, 0.5)
KeyGlow.BackgroundTransparency = 1
KeyGlow.Image = "rbxassetid://5028857084"
KeyGlow.ImageColor3 = Color3.fromRGB(139, 0, 0)
KeyGlow.ImageTransparency = 1
KeyGlow.ScaleType = Enum.ScaleType.Slice
KeyGlow.SliceCenter = Rect.new(24, 24, 276, 276)
KeyGlow.Parent = KeyPanel

-- Header
local KeyHeader = Instance.new("Frame")
KeyHeader.Size = UDim2.new(1, 0, 0, 100)
KeyHeader.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
KeyHeader.BorderSizePixel = 0
KeyHeader.Parent = KeyPanel

Instance.new("UICorner", KeyHeader).CornerRadius = UDim.new(0, 16)

local KeyHeaderFix = Instance.new("Frame")
KeyHeaderFix.Size = UDim2.new(1, 0, 0, 20)
KeyHeaderFix.Position = UDim2.new(0, 0, 1, -20)
KeyHeaderFix.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
KeyHeaderFix.BorderSizePixel = 0
KeyHeaderFix.Parent = KeyHeader

local KeyHeaderGradient = Instance.new("UIGradient")
KeyHeaderGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(200, 0, 50)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(139, 0, 0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 0, 20))
}
KeyHeaderGradient.Rotation = 45
KeyHeaderGradient.Parent = KeyHeader

-- Logo
local KeyLogo = Instance.new("TextLabel")
KeyLogo.Size = UDim2.new(1, 0, 0, 40)
KeyLogo.Position = UDim2.new(0, 0, 0, 15)
KeyLogo.BackgroundTransparency = 1
KeyLogo.Text = "ğŸ”¥ KIRA HUB ğŸ”¥"
KeyLogo.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyLogo.Font = Enum.Font.GothamBlack
KeyLogo.TextSize = 28
KeyLogo.Parent = KeyHeader

local KeySubtitle = Instance.new("TextLabel")
KeySubtitle.Size = UDim2.new(1, 0, 0, 25)
KeySubtitle.Position = UDim2.new(0, 0, 0, 55)
KeySubtitle.BackgroundTransparency = 1
KeySubtitle.Text = "[ LAST LETTER ] v3.2"
KeySubtitle.TextColor3 = Color3.fromRGB(255, 220, 150)
KeySubtitle.Font = Enum.Font.GothamBold
KeySubtitle.TextSize = 16
KeySubtitle.Parent = KeyHeader

local KeyNote = Instance.new("TextLabel")
KeyNote.Size = UDim2.new(1, 0, 0, 18)
KeyNote.Position = UDim2.new(0, 0, 0, 78)
KeyNote.BackgroundTransparency = 1
KeyNote.Text = "ğŸ”‘ Enter Key to Continue"
KeyNote.TextColor3 = Color3.fromRGB(200, 200, 200)
KeyNote.Font = Enum.Font.Gotham
KeyNote.TextSize = 12
KeyNote.Parent = KeyHeader

-- Content
local KeyContent = Instance.new("Frame")
KeyContent.Size = UDim2.new(1, -30, 1, -115)
KeyContent.Position = UDim2.new(0, 15, 0, 105)
KeyContent.BackgroundTransparency = 1
KeyContent.Parent = KeyPanel

-- Key Input
local KeyInputFrame = Instance.new("Frame")
KeyInputFrame.Size = UDim2.new(1, 0, 0, 50)
KeyInputFrame.Position = UDim2.new(0, 0, 0, 20)
KeyInputFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
KeyInputFrame.BorderSizePixel = 0
KeyInputFrame.Parent = KeyContent

Instance.new("UICorner", KeyInputFrame).CornerRadius = UDim.new(0, 10)

local KeyInputStroke = Instance.new("UIStroke")
KeyInputStroke.Color = Color3.fromRGB(80, 80, 80)
KeyInputStroke.Thickness = 2
KeyInputStroke.Parent = KeyInputFrame

local KeyInput = Instance.new("TextBox")
KeyInput.Size = UDim2.new(1, -20, 1, 0)
KeyInput.Position = UDim2.new(0, 10, 0, 0)
KeyInput.BackgroundTransparency = 1
KeyInput.Text = ""  -- Blank, no pre-fill
KeyInput.PlaceholderText = "ğŸ”‘ Enter your key here..."
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
KeyInput.Font = Enum.Font.GothamBold
KeyInput.TextSize = 16
KeyInput.ClearTextOnFocus = false
KeyInput.Parent = KeyInputFrame

-- Status
local KeyStatus = Instance.new("TextLabel")
KeyStatus.Size = UDim2.new(1, 0, 0, 25)
KeyStatus.Position = UDim2.new(0, 0, 0, 75)
KeyStatus.BackgroundTransparency = 1
KeyStatus.Text = ""
KeyStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
KeyStatus.Font = Enum.Font.GothamBold
KeyStatus.TextSize = 12
KeyStatus.Parent = KeyContent

-- Submit
local SubmitButton = Instance.new("TextButton")
SubmitButton.Size = UDim2.new(1, 0, 0, 45)
SubmitButton.Position = UDim2.new(0, 0, 0, 105)
SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 130, 0)
SubmitButton.Text = "âœ… SUBMIT KEY"
SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitButton.Font = Enum.Font.GothamBlack
SubmitButton.TextSize = 16
SubmitButton.Parent = KeyContent

Instance.new("UICorner", SubmitButton).CornerRadius = UDim.new(0, 10)

-- Divider
local Divider = Instance.new("Frame")
Divider.Size = UDim2.new(1, 0, 0, 2)
Divider.Position = UDim2.new(0, 0, 0, 165)
Divider.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Divider.BorderSizePixel = 0
Divider.Parent = KeyContent

local DividerLabel = Instance.new("TextLabel")
DividerLabel.Size = UDim2.new(0, 100, 0, 20)
DividerLabel.Position = UDim2.new(0.5, -50, 0, 155)
DividerLabel.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
DividerLabel.Text = "GET KEY"
DividerLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
DividerLabel.Font = Enum.Font.GothamBold
DividerLabel.TextSize = 11
DividerLabel.Parent = KeyContent

-- Discord
local DiscordButton = Instance.new("TextButton")
DiscordButton.Size = UDim2.new(1, 0, 0, 45)
DiscordButton.Position = UDim2.new(0, 0, 0, 185)
DiscordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
DiscordButton.Text = "ğŸ’¬ COPY DISCORD INVITE (Get Key)"
DiscordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DiscordButton.Font = Enum.Font.GothamBold
DiscordButton.TextSize = 14
DiscordButton.Parent = KeyContent

Instance.new("UICorner", DiscordButton).CornerRadius = UDim.new(0, 10)

-- YouTube
local YouTubeButton = Instance.new("TextButton")
YouTubeButton.Size = UDim2.new(1, 0, 0, 45)
YouTubeButton.Position = UDim2.new(0, 0, 0, 240)
YouTubeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
YouTubeButton.Text = "ğŸ“º COPY YOUTUBE LINK (Subscribe!)"
YouTubeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
YouTubeButton.Font = Enum.Font.GothamBold
YouTubeButton.TextSize = 14
YouTubeButton.Parent = KeyContent

Instance.new("UICorner", YouTubeButton).CornerRadius = UDim.new(0, 10)

-- Credits (increased size for visibility)
local KeyCredits = Instance.new("TextLabel")
KeyCredits.Size = UDim2.new(1, 0, 0, 50)  -- Increased height
KeyCredits.Position = UDim2.new(0, 0, 0, 300)
KeyCredits.BackgroundTransparency = 1
KeyCredits.Text = "Made by KIRA ğŸ”¥\nSupport KIRA by subscribing & joining Discord!"
KeyCredits.TextColor3 = Color3.fromRGB(120, 120, 120)
KeyCredits.Font = Enum.Font.Gotham
KeyCredits.TextSize = 13  -- Increased for visibility
KeyCredits.Parent = KeyContent

local MouseWarn = Instance.new("TextLabel")
MouseWarn.Size = UDim2.new(1, 0, 0, 20)
MouseWarn.Position = UDim2.new(0, 0, 0, 350)  -- Adjusted position due to larger credits
MouseWarn.BackgroundTransparency = 1
MouseWarn.Text = "âš ï¸ Mouse locked? Spam M or press ENTER to unlock!"
MouseWarn.TextColor3 = Color3.fromRGB(255, 200, 100)
MouseWarn.Font = Enum.Font.GothamBold
MouseWarn.TextSize = 10
MouseWarn.Parent = KeyContent

-- Animations with safe pcall
local function AnimateKeyPanelIn()
    local animOk = pcall(function()
        KeyPanel.Position = UDim2.new(0.5, -210, 0.5, -200)
        KeyPanel.BackgroundTransparency = 1
        KeyStroke.Transparency = 1
        KeyGlow.ImageTransparency = 1
        BlurFrame.BackgroundTransparency = 1
        
        TweenService:Create(BlurFrame, TweenInfo.new(0.5), {BackgroundTransparency = 0.4}):Play()
        task.wait(0.2)
        TweenService:Create(KeyPanel, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
            Position = UDim2.new(0.5, -210, 0.5, -240),
            BackgroundTransparency = 0
        }):Play()
        TweenService:Create(KeyStroke, TweenInfo.new(0.4), {Transparency = 0}):Play()
        TweenService:Create(KeyGlow, TweenInfo.new(0.8), {ImageTransparency = 0.6}):Play()
    end)
    if not animOk then
        -- Fallback: Show without animation
        KeyPanel.BackgroundTransparency = 0
        KeyStroke.Transparency = 0
        KeyGlow.ImageTransparency = 0.6
        BlurFrame.BackgroundTransparency = 0.4
    end
end

local function AnimateKeyPanelOut(callback)
    local animOk = pcall(function()
        TweenService:Create(KeyPanel, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Position = UDim2.new(0.5, -210, 0.5, -200),
            BackgroundTransparency = 1
        }):Play()
        TweenService:Create(KeyStroke, TweenInfo.new(0.3), {Transparency = 1}):Play()
        TweenService:Create(KeyGlow, TweenInfo.new(0.3), {ImageTransparency = 1}):Play()
        TweenService:Create(BlurFrame, TweenInfo.new(0.4), {BackgroundTransparency = 1}):Play()
        task.wait(0.5)
        KeyGui:Destroy()
        if callback then callback() end
    end)
    if not animOk then
        KeyGui:Destroy()
        if callback then callback() end
    end
end

local function AddHoverEffect(btn, hover, normal)
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = hover}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = normal}):Play()
    end)
end

AddHoverEffect(SubmitButton, Color3.fromRGB(0, 160, 0), Color3.fromRGB(0, 130, 0))
AddHoverEffect(DiscordButton, Color3.fromRGB(110, 125, 255), Color3.fromRGB(88, 101, 242))
AddHoverEffect(YouTubeButton, Color3.fromRGB(255, 50, 50), Color3.fromRGB(255, 0, 0))

local function ButtonClick(btn)
    local orig = btn.Size
    TweenService:Create(btn, TweenInfo.new(0.1), {
        Size = UDim2.new(orig.X.Scale * 0.95, orig.X.Offset * 0.95, orig.Y.Scale, orig.Y.Offset * 0.95)
    }):Play()
    task.wait(0.1)
    TweenService:Create(btn, TweenInfo.new(0.1), {Size = orig}):Play()
end

DiscordButton.MouseButton1Click:Connect(function()
    ButtonClick(DiscordButton)
    pcall(function() setclipboard(DISCORD_LINK) end)
    StarterGui:SetCore("SendNotification", {Title = "ğŸ“‹ Copied!", Text = "Discord invite copied!", Duration = 5})
    KeyStatus.Text = "âœ… Discord link copied!"
    KeyStatus.TextColor3 = Color3.fromRGB(100, 255, 100)
end)

YouTubeButton.MouseButton1Click:Connect(function()
    ButtonClick(YouTubeButton)
    pcall(function() setclipboard(YOUTUBE_LINK) end)
    StarterGui:SetCore("SendNotification", {Title = "ğŸ“‹ Copied!", Text = "YouTube link copied!", Duration = 5})
    KeyStatus.Text = "âœ… YouTube link copied!"
    KeyStatus.TextColor3 = Color3.fromRGB(100, 255, 100)
end)

SubmitButton.MouseButton1Click:Connect(function()
    ButtonClick(SubmitButton)
    local key = KeyInput.Text:gsub("%s+", "")
    
    if key == "" then
        KeyStatus.Text = "âŒ Please enter a key!"
        KeyStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
        TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(255, 50, 50)}):Play()
        task.wait(0.5)
        TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(80, 80, 80)}):Play()
        return
    end
    
    if key == VALID_KEY then
        KeyStatus.Text = "âœ… Key Valid! Loading..."
        KeyStatus.TextColor3 = Color3.fromRGB(100, 255, 100)
        TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(0, 255, 0)}):Play()
        TweenService:Create(SubmitButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 200, 0)}):Play()
        pcall(function() if writefile then writefile("KiraLastLetterKey.txt", key) end end)
        KeyVerified = true
        task.wait(1)
        AnimateKeyPanelOut(LoadMainScript)
    else
        KeyStatus.Text = "âŒ Invalid Key! Join Discord for key."
        KeyStatus.TextColor3 = Color3.fromRGB(255, 100, 100)
        TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(255, 50, 50)}):Play()
        local orig = KeyInputFrame.Position
        for i = 1, 5 do
            KeyInputFrame.Position = UDim2.new(orig.X.Scale, orig.X.Offset + 5, orig.Y.Scale, orig.Y.Offset)
            task.wait(0.03)
            KeyInputFrame.Position = UDim2.new(orig.X.Scale, orig.X.Offset - 5, orig.Y.Scale, orig.Y.Offset)
            task.wait(0.03)
        end
        KeyInputFrame.Position = orig
        task.wait(0.5)
        TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(80, 80, 80)}):Play()
    end
end)

KeyInput.FocusLost:Connect(function(enter)
    if enter then SubmitButton.MouseButton1Click:Fire() end
end)

KeyInput.Focused:Connect(function()
    TweenService:Create(KeyInputStroke, TweenInfo.new(0.2), {Color = Color3.fromRGB(139, 0, 0)}):Play()
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ® MAIN SCRIPT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function LoadMainScript()

local CONFIG = {
    wordsPerPage = 8,
    minWordLength = 3,
}

-- Typing Speeds (including REAL HUMAN!)
local TYPING_SPEEDS = {
    {name = "ğŸŒ SNAIL", delay = 0.25, randomMin = 20, randomMax = 35, isHuman = false},
    {name = "ğŸ‘¤ HUMAN", delay = 0.10, randomMin = 8, randomMax = 15, isHuman = false},
    {name = "âš¡ MASTER", delay = 0.05, randomMin = 3, randomMax = 8, isHuman = false},
    {name = "ğŸ’» SUPER", delay = 0.02, randomMin = 1, randomMax = 3, isHuman = false},
    {name = "ğŸ§  REAL", delay = 0.12, randomMin = 10, randomMax = 20, isHuman = true}, -- NEW!
}
local SelectedSpeedIndex = 2

-- Thinking Delay Options (NEW!)
local THINKING_DELAYS = {
    {name = "0s", delay = 0},
    {name = "0.5s", delay = 0.5},
    {name = "1s", delay = 1},
    {name = "2s", delay = 2},
    {name = "5s", delay = 5},
}
local SelectedDelayIndex = 1

-- Hard Letters
local HARD_LETTERS_SET = {x=1, z=1, q=1, j=1, v=1, k=1}

-- Word Ranges
local WordRangeOptions = {
    {name = "1-5", min = 1, max = 5},
    {name = "5-10", min = 5, max = 10},
    {name = "10-20", min = 10, max = 20},
    {name = "20+", min = 20, max = 999},
    {name = "ALL", min = 1, max = 999}
}
local SelectedRangeIndex = 5

-- Suggestion Range
local SuggestionRangeOptions = {
    {name = "ALL", min = 1, max = 999},
    {name = "3-5", min = 3, max = 5},
    {name = "6-8", min = 6, max = 8},
    {name = "9-12", min = 9, max = 12},
    {name = "13+", min = 13, max = 999},
}
local SelectedSuggestionRange = 1

-- State
local allWords = {}
local verifiedWords = {}
local usedWords = {}
local topWords = {}
local myWordsHistory = {}
local currentPage = 1
local currentLetters = ""

-- Toggles
local AutoTypeEnabled = false
local AutoSuggestEnabled = true
local MeaningfulOnlyMode = true
local HardWordsMode = false
local IsMinimized = false

-- Dictionaries
local DICTIONARY_URLS = {
    "https://raw.githubusercontent.com/first20hours/google-10000-english/master/google-10000-english-usa-no-swears.txt",
    "https://raw.githubusercontent.com/first20hours/google-10000-english/master/google-10000-english.txt",
}

local BACKUP_DICTIONARY = "https://raw.githubusercontent.com/dwyl/english-words/refs/heads/master/words_dictionary.json"

local VERIFIED_WORDS = {
    "apple", "banana", "orange", "grape", "mango", "peach", "cherry",
    "house", "building", "castle", "palace", "cottage", "mansion",
    "elephant", "giraffe", "zebra", "monkey", "tiger", "lion", "bear",
    "computer", "keyboard", "monitor", "speaker", "printer",
    "beautiful", "wonderful", "amazing", "fantastic", "incredible",
    "adventure", "mystery", "journey", "discover", "explore", "travel",
    "mountain", "valley", "river", "ocean", "forest", "desert", "island",
    "sunshine", "rainbow", "thunder", "lightning", "snowflake",
    "birthday", "holiday", "festival", "celebration", "anniversary",
    "chocolate", "vanilla", "strawberry", "blueberry", "raspberry",
    "xylophone", "xenon", "box", "fox", "mix", "fix", "six", "tax", "wax", "max",
    "flex", "apex", "index", "relax", "complex", "reflex", "vertex", "phoenix", "matrix",
    "jazz", "buzz", "fizz", "fuzz", "quiz", "whiz", "topaz", "waltz",
    "queue", "unique", "antique", "boutique", "technique", "mystique",
    "jealousy", "zealous", "rhythm", "symphony", "melody", "harmony",
}

local EXCLUDED_PATTERNS = {"^[bcdfghjklmnpqrstvwxyz]+$", "^[aeiou]+$", "(..)%1%1", "^..$", "^.$"}
local EXCLUDED_WORDS = {["aa"]=1,["aaa"]=1,["bb"]=1,["cc"]=1,["hmm"]=1,["uhh"]=1,["grr"]=1}
local SKIP_COMMON = {["the"]=1,["and"]=1,["a"]=1,["an"]=1,["is"]=1,["it"]=1,["to"]=1,["of"]=1}

-- Validation
local function HasProperStructure(word)
    if #word < 3 then return false end
    local vowels = 0
    local vc = {a=1,e=1,i=1,o=1,u=1,y=1}
    for i = 1, #word do if vc[word:sub(i,i):lower()] then vowels = vowels + 1 end end
    if vowels == 0 then return false end
    local ratio = vowels / #word
    return ratio >= 0.15 and ratio <= 0.65
end

local function IsValidMeaningfulWord(word)
    word = word:lower()
    if #word < CONFIG.minWordLength or #word > 45 then return false end
    if EXCLUDED_WORDS[word] or SKIP_COMMON[word] then return false end
    for _, p in ipairs(EXCLUDED_PATTERNS) do if word:match(p) then return false end end
    if not HasProperStructure(word) then return false end
    return word:match("^[a-z]+$") ~= nil
end

local function EndsWithHardLetter(word)
    return HARD_LETTERS_SET[word:sub(-1):lower()] ~= nil
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ¨ CREATE UI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KiraLastLetter_" .. math.random(100000, 999999)
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = CoreGui or gethui()
env.KiraLastLetterV32 = ScreenGui.Name

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 470, 0, 720)
MainFrame.Position = UDim2.new(1, -490, 0.5, -360)
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainFrame.BorderSizePixel = 0
MainFrame.BackgroundTransparency = 1
MainFrame.Parent = ScreenGui

Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 16)

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Color3.fromRGB(200, 0, 40)
MainStroke.Thickness = 3
MainStroke.Transparency = 1
MainStroke.Parent = MainFrame

-- Glow
local GlowFrame = Instance.new("ImageLabel")
GlowFrame.Size = UDim2.new(1, 60, 1, 60)
GlowFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
GlowFrame.AnchorPoint = Vector2.new(0.5, 0.5)
GlowFrame.BackgroundTransparency = 1
GlowFrame.Image = "rbxassetid://5028857084"
GlowFrame.ImageColor3 = Color3.fromRGB(139, 0, 0)
GlowFrame.ImageTransparency = 1
GlowFrame.ScaleType = Enum.ScaleType.Slice
GlowFrame.SliceCenter = Rect.new(24, 24, 276, 276)
GlowFrame.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 65)
Header.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

Instance.new("UICorner", Header).CornerRadius = UDim.new(0, 16)

local HeaderFix = Instance.new("Frame")
HeaderFix.Size = UDim2.new(1, 0, 0, 20)
HeaderFix.Position = UDim2.new(0, 0, 1, -20)
HeaderFix.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
HeaderFix.BorderSizePixel = 0
HeaderFix.Parent = Header

local HeaderGradient = Instance.new("UIGradient")
HeaderGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(180, 0, 40)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(139, 0, 0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 0, 20))
}
HeaderGradient.Rotation = 45
HeaderGradient.Parent = Header

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0, 280, 0, 28)
Title.Position = UDim2.new(0, 15, 0, 10)
Title.BackgroundTransparency = 1
Title.Text = "ğŸ”¥ KIRA HUB"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBlack
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(0, 280, 0, 18)
Subtitle.Position = UDim2.new(0, 15, 0, 38)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "[ LAST LETTER ] v3.2 FINAL"
Subtitle.TextColor3 = Color3.fromRGB(255, 220, 150)
Subtitle.Font = Enum.Font.GothamBold
Subtitle.TextSize = 13
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.Parent = Header

-- Controls
local function CreateCtrlBtn(text, pos, color)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 30, 0, 30)
    btn.Position = pos
    btn.BackgroundColor3 = color
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = Header
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.15), {Size = UDim2.new(0, 34, 0, 34)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.15), {Size = UDim2.new(0, 30, 0, 30)}):Play()
    end)
    return btn
end

local CloseButton = CreateCtrlBtn("âœ•", UDim2.new(1, -40, 0, 17), Color3.fromRGB(200, 50, 50))
local MinimizeButton = CreateCtrlBtn("â€”", UDim2.new(1, -75, 0, 17), Color3.fromRGB(70, 70, 70))

-- Content
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -20, 1, -75)
ContentFrame.Position = UDim2.new(0, 10, 0, 70)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ TOGGLES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local ToggleSection = Instance.new("Frame")
ToggleSection.Size = UDim2.new(1, 0, 0, 50)
ToggleSection.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
ToggleSection.BorderSizePixel = 0
ToggleSection.Parent = ContentFrame
Instance.new("UICorner", ToggleSection).CornerRadius = UDim.new(0, 10)

local function CreateToggle(name, text, pos, default, width)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(width or 0.24, -3, 0, 45)
    frame.Position = pos
    frame.BackgroundTransparency = 1
    frame.Parent = ToggleSection

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 14)
    label.Position = UDim2.new(0, 0, 0, 3)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(180, 180, 180)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 9
    label.TextScaled = true
    label.Parent = frame

    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(1, -4, 0, 22)
    btn.Position = UDim2.new(0, 2, 0, 20)
    btn.BackgroundColor3 = default and Color3.fromRGB(0, 110, 0) or Color3.fromRGB(110, 0, 0)
    btn.Text = default and "âœ… ON" or "âŒ OFF"
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 10
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)
    
    return btn
end

local AutoTypeToggle = CreateToggle("AutoType", "âš¡ AUTO-TYPE", UDim2.new(0, 0, 0, 2), false, 0.25)
local AutoSuggestToggle = CreateToggle("AutoSuggest", "ğŸ’¡ SUGGEST", UDim2.new(0.25, 0, 0, 2), true, 0.25)
local MeaningfulToggle = CreateToggle("Meaningful", "âœ“ REAL", UDim2.new(0.50, 0, 0, 2), true, 0.25)
local HardWordsToggle = CreateToggle("HardWords", "ğŸ’€ HARD", UDim2.new(0.75, 0, 0, 2), false, 0.25)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- âš¡ TYPING SPEED (WITH REAL HUMAN!)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local SpeedSection = Instance.new("Frame")
SpeedSection.Size = UDim2.new(1, 0, 0, 45)
SpeedSection.Position = UDim2.new(0, 0, 0, 55)
SpeedSection.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SpeedSection.BorderSizePixel = 0
SpeedSection.Parent = ContentFrame
Instance.new("UICorner", SpeedSection).CornerRadius = UDim.new(0, 8)

local SpeedTitle = Instance.new("TextLabel")
SpeedTitle.Size = UDim2.new(1, -10, 0, 16)
SpeedTitle.Position = UDim2.new(0, 10, 0, 3)
SpeedTitle.BackgroundTransparency = 1
SpeedTitle.Text = "âŒ¨ï¸ TYPING SPEED (ğŸ§  REAL = Human Mistakes!)"
SpeedTitle.TextColor3 = Color3.fromRGB(255, 200, 100)
SpeedTitle.Font = Enum.Font.GothamBold
SpeedTitle.TextSize = 9
SpeedTitle.TextXAlignment = Enum.TextXAlignment.Left
SpeedTitle.Parent = SpeedSection

local SpeedButtonsFrame = Instance.new("Frame")
SpeedButtonsFrame.Size = UDim2.new(1, -10, 0, 22)
SpeedButtonsFrame.Position = UDim2.new(0, 5, 0, 20)
SpeedButtonsFrame.BackgroundTransparency = 1
SpeedButtonsFrame.Parent = SpeedSection

local SpeedButtons = {}
for i, speed in ipairs(TYPING_SPEEDS) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.19, -3, 1, 0)
    btn.Position = UDim2.new((i-1) * 0.2, 2, 0, 0)
    btn.BackgroundColor3 = (i == SelectedSpeedIndex) and Color3.fromRGB(139, 0, 0) or Color3.fromRGB(40, 40, 40)
    btn.Text = speed.name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 9
    btn.Parent = SpeedButtonsFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)
    SpeedButtons[i] = btn
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- â±ï¸ THINKING DELAY (NEW!)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local DelaySection = Instance.new("Frame")
DelaySection.Size = UDim2.new(1, 0, 0, 45)
DelaySection.Position = UDim2.new(0, 0, 0, 105)
DelaySection.BackgroundColor3 = Color3.fromRGB(30, 20, 40)
DelaySection.BorderSizePixel = 0
DelaySection.Parent = ContentFrame
Instance.new("UICorner", DelaySection).CornerRadius = UDim.new(0, 8)

local DelayTitle = Instance.new("TextLabel")
DelayTitle.Size = UDim2.new(1, -10, 0, 16)
DelayTitle.Position = UDim2.new(0, 10, 0, 3)
DelayTitle.BackgroundTransparency = 1
DelayTitle.Text = "â±ï¸ THINKING DELAY (Wait before typing)"
DelayTitle.TextColor3 = Color3.fromRGB(200, 150, 255)
DelayTitle.Font = Enum.Font.GothamBold
DelayTitle.TextSize = 10
DelayTitle.TextXAlignment = Enum.TextXAlignment.Left
DelayTitle.Parent = DelaySection

local DelayButtonsFrame = Instance.new("Frame")
DelayButtonsFrame.Size = UDim2.new(1, -10, 0, 22)
DelayButtonsFrame.Position = UDim2.new(0, 5, 0, 20)
DelayButtonsFrame.BackgroundTransparency = 1
DelayButtonsFrame.Parent = DelaySection

local DelayButtons = {}
for i, d in ipairs(THINKING_DELAYS) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.19, -3, 1, 0)
    btn.Position = UDim2.new((i-1) * 0.2, 2, 0, 0)
    btn.BackgroundColor3 = (i == SelectedDelayIndex) and Color3.fromRGB(100, 50, 150) or Color3.fromRGB(40, 40, 40)
    btn.Text = d.name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 11
    btn.Parent = DelayButtonsFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)
    DelayButtons[i] = btn
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“ WORD RANGE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local RangeSection = Instance.new("Frame")
RangeSection.Size = UDim2.new(1, 0, 0, 45)
RangeSection.Position = UDim2.new(0, 0, 0, 155)
RangeSection.BackgroundColor3 = Color3.fromRGB(22, 22, 22)
RangeSection.BorderSizePixel = 0
RangeSection.Parent = ContentFrame
Instance.new("UICorner", RangeSection).CornerRadius = UDim.new(0, 8)

local RangeTitle = Instance.new("TextLabel")
RangeTitle.Size = UDim2.new(1, -10, 0, 16)
RangeTitle.Position = UDim2.new(0, 10, 0, 3)
RangeTitle.BackgroundTransparency = 1
RangeTitle.Text = "ğŸ“ AUTO-TYPE RANGE"
RangeTitle.TextColor3 = Color3.fromRGB(100, 200, 255)
RangeTitle.Font = Enum.Font.GothamBold
RangeTitle.TextSize = 10
RangeTitle.TextXAlignment = Enum.TextXAlignment.Left
RangeTitle.Parent = RangeSection

local RangeButtonsFrame = Instance.new("Frame")
RangeButtonsFrame.Size = UDim2.new(1, -10, 0, 22)
RangeButtonsFrame.Position = UDim2.new(0, 5, 0, 20)
RangeButtonsFrame.BackgroundTransparency = 1
RangeButtonsFrame.Parent = RangeSection

local RangeButtons = {}
for i, r in ipairs(WordRangeOptions) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.19, -3, 1, 0)
    btn.Position = UDim2.new((i-1) * 0.2, 2, 0, 0)
    btn.BackgroundColor3 = (i == SelectedRangeIndex) and Color3.fromRGB(139, 0, 0) or Color3.fromRGB(40, 40, 40)
    btn.Text = r.name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 10
    btn.Parent = RangeButtonsFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)
    RangeButtons[i] = btn
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ” LETTERS DISPLAY
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local LettersSection = Instance.new("Frame")
LettersSection.Size = UDim2.new(1, 0, 0, 55)
LettersSection.Position = UDim2.new(0, 0, 0, 205)
LettersSection.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
LettersSection.BorderSizePixel = 0
LettersSection.Parent = ContentFrame
Instance.new("UICorner", LettersSection).CornerRadius = UDim.new(0, 10)

local LettersGradient = Instance.new("UIGradient")
LettersGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(180, 0, 40)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 0, 20))
}
LettersGradient.Rotation = 90
LettersGradient.Parent = LettersSection

local CurrentLettersLabel = Instance.new("TextLabel")
CurrentLettersLabel.Size = UDim2.new(1, 0, 0, 32)
CurrentLettersLabel.Position = UDim2.new(0, 0, 0, 5)
CurrentLettersLabel.BackgroundTransparency = 1
CurrentLettersLabel.Text = "---"
CurrentLettersLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
CurrentLettersLabel.Font = Enum.Font.GothamBlack
CurrentLettersLabel.TextSize = 30
CurrentLettersLabel.Parent = LettersSection

local LettersSubtext = Instance.new("TextLabel")
LettersSubtext.Size = UDim2.new(1, 0, 0, 15)
LettersSubtext.Position = UDim2.new(0, 0, 0, 37)
LettersSubtext.BackgroundTransparency = 1
LettersSubtext.Text = "â³ Waiting for letters..."
LettersSubtext.TextColor3 = Color3.fromRGB(200, 200, 200)
LettersSubtext.Font = Enum.Font.GothamBold
LettersSubtext.TextSize = 10
LettersSubtext.Parent = LettersSection

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“‹ SUGGESTION FILTER
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local SuggestFilterSection = Instance.new("Frame")
SuggestFilterSection.Size = UDim2.new(1, 0, 0, 30)
SuggestFilterSection.Position = UDim2.new(0, 0, 0, 265)
SuggestFilterSection.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
SuggestFilterSection.BorderSizePixel = 0
SuggestFilterSection.Parent = ContentFrame
Instance.new("UICorner", SuggestFilterSection).CornerRadius = UDim.new(0, 8)

local FilterTitle = Instance.new("TextLabel")
FilterTitle.Size = UDim2.new(0, 60, 1, 0)
FilterTitle.Position = UDim2.new(0, 8, 0, 0)
FilterTitle.BackgroundTransparency = 1
FilterTitle.Text = "ğŸ“Š FILTER:"
FilterTitle.TextColor3 = Color3.fromRGB(180, 180, 180)
FilterTitle.Font = Enum.Font.GothamBold
FilterTitle.TextSize = 9
FilterTitle.TextXAlignment = Enum.TextXAlignment.Left
FilterTitle.Parent = SuggestFilterSection

local SuggestRangeButtons = {}
for i, r in ipairs(SuggestionRangeOptions) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 50, 0, 20)
    btn.Position = UDim2.new(0, 65 + (i-1) * 55, 0.5, -10)
    btn.BackgroundColor3 = (i == SelectedSuggestionRange) and Color3.fromRGB(0, 100, 150) or Color3.fromRGB(45, 45, 45)
    btn.Text = r.name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 9
    btn.Parent = SuggestFilterSection
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)
    SuggestRangeButtons[i] = btn
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“ SUGGESTIONS LIST
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local SuggestionsFrame = Instance.new("Frame")
SuggestionsFrame.Size = UDim2.new(1, 0, 0, 230)
SuggestionsFrame.Position = UDim2.new(0, 0, 0, 300)
SuggestionsFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
SuggestionsFrame.BorderSizePixel = 0
SuggestionsFrame.ClipsDescendants = true
SuggestionsFrame.Parent = ContentFrame
Instance.new("UICorner", SuggestionsFrame).CornerRadius = UDim.new(0, 10)

local SuggestionsHeader = Instance.new("Frame")
SuggestionsHeader.Size = UDim2.new(1, 0, 0, 22)
SuggestionsHeader.BackgroundColor3 = Color3.fromRGB(32, 32, 32)
SuggestionsHeader.BorderSizePixel = 0
SuggestionsHeader.Parent = SuggestionsFrame

local SuggestionsTitle = Instance.new("TextLabel")
SuggestionsTitle.Size = UDim2.new(0.6, 0, 1, 0)
SuggestionsTitle.Position = UDim2.new(0, 10, 0, 0)
SuggestionsTitle.BackgroundTransparency = 1
SuggestionsTitle.Text = "ğŸ“ AUTO-SUGGESTIONS"
SuggestionsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
SuggestionsTitle.Font = Enum.Font.GothamBold
SuggestionsTitle.TextSize = 10
SuggestionsTitle.TextXAlignment = Enum.TextXAlignment.Left
SuggestionsTitle.Parent = SuggestionsHeader

local MatchCountLabel = Instance.new("TextLabel")
MatchCountLabel.Size = UDim2.new(0.35, 0, 1, 0)
MatchCountLabel.Position = UDim2.new(0.63, 0, 0, 0)
MatchCountLabel.BackgroundTransparency = 1
MatchCountLabel.Text = "0 found"
MatchCountLabel.TextColor3 = Color3.fromRGB(0, 255, 150)
MatchCountLabel.Font = Enum.Font.GothamBold
MatchCountLabel.TextSize = 10
MatchCountLabel.TextXAlignment = Enum.TextXAlignment.Right
MatchCountLabel.Parent = SuggestionsHeader

local SuggestionsList = Instance.new("ScrollingFrame")
SuggestionsList.Size = UDim2.new(1, -10, 1, -28)
SuggestionsList.Position = UDim2.new(0, 5, 0, 24)
SuggestionsList.BackgroundTransparency = 1
SuggestionsList.ScrollBarThickness = 5
SuggestionsList.ScrollBarImageColor3 = Color3.fromRGB(139, 0, 0)
SuggestionsList.CanvasSize = UDim2.new(0, 0, 0, 0)
SuggestionsList.Parent = SuggestionsFrame

local SuggestionsLayout = Instance.new("UIListLayout")
SuggestionsLayout.SortOrder = Enum.SortOrder.LayoutOrder
SuggestionsLayout.Padding = UDim.new(0, 4)
SuggestionsLayout.Parent = SuggestionsList

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“„ PAGINATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local PaginationFrame = Instance.new("Frame")
PaginationFrame.Size = UDim2.new(1, 0, 0, 28)
PaginationFrame.Position = UDim2.new(0, 0, 0, 535)
PaginationFrame.BackgroundTransparency = 1
PaginationFrame.Parent = ContentFrame

local PrevButton = Instance.new("TextButton")
PrevButton.Size = UDim2.new(0, 60, 0, 24)
PrevButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
PrevButton.Text = "â—€ PREV"
PrevButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PrevButton.Font = Enum.Font.GothamBold
PrevButton.TextSize = 10
PrevButton.Parent = PaginationFrame
Instance.new("UICorner", PrevButton).CornerRadius = UDim.new(0, 5)

local PageLabel = Instance.new("TextLabel")
PageLabel.Size = UDim2.new(0, 80, 0, 24)
PageLabel.Position = UDim2.new(0.5, -40, 0, 0)
PageLabel.BackgroundTransparency = 1
PageLabel.Text = "Page 1/1"
PageLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
PageLabel.Font = Enum.Font.GothamBold
PageLabel.TextSize = 11
PageLabel.Parent = PaginationFrame

local NextButton = Instance.new("TextButton")
NextButton.Size = UDim2.new(0, 60, 0, 24)
NextButton.Position = UDim2.new(1, -60, 0, 0)
NextButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
NextButton.Text = "NEXT â–¶"
NextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NextButton.Font = Enum.Font.GothamBold
NextButton.TextSize = 10
NextButton.Parent = PaginationFrame
Instance.new("UICorner", NextButton).CornerRadius = UDim.new(0, 5)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ”§ CREDITS (increased visibility)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local CreditsFrame = Instance.new("Frame")
CreditsFrame.Size = UDim2.new(1, 0, 0, 30)  -- Increased height for better visibility
CreditsFrame.Position = UDim2.new(0, 0, 1, -30)  -- Adjusted position to fit
CreditsFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
CreditsFrame.BorderSizePixel = 0
CreditsFrame.Parent = ContentFrame
Instance.new("UICorner", CreditsFrame).CornerRadius = UDim.new(0, 6)

local CreditsLabel = Instance.new("TextLabel")
CreditsLabel.Size = UDim2.new(1, 0, 1, 0)
CreditsLabel.BackgroundTransparency = 1
CreditsLabel.Text = "Made by KIRA ğŸ”¥ | YT: @kira_0001 | DC: discord.gg/ZH48pK5wen"
CreditsLabel.TextColor3 = Color3.fromRGB(100, 100, 100)
CreditsLabel.Font = Enum.Font.Gotham
CreditsLabel.TextSize = 12  -- Increased for better visibility
CreditsLabel.Parent = CreditsFrame

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ¬ ANIMATIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function AnimateMainIn()
    MainFrame.Position = UDim2.new(1, 50, 0.5, -360)
    MainFrame.BackgroundTransparency = 1
    MainStroke.Transparency = 1
    GlowFrame.ImageTransparency = 1
    
    TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Position = UDim2.new(1, -490, 0.5, -360),
        BackgroundTransparency = 0
    }):Play()
    TweenService:Create(MainStroke, TweenInfo.new(0.3), {Transparency = 0}):Play()
    TweenService:Create(GlowFrame, TweenInfo.new(0.6), {ImageTransparency = 0.7}):Play()
    
    task.spawn(function()
        while ScreenGui and ScreenGui.Parent do
            TweenService:Create(GlowFrame, TweenInfo.new(1.2, Enum.EasingStyle.Sine), {ImageTransparency = 0.85}):Play()
            task.wait(1.2)
            TweenService:Create(GlowFrame, TweenInfo.new(1.2, Enum.EasingStyle.Sine), {ImageTransparency = 0.6}):Play()
            task.wait(1.2)
        end
    end)
end

local function AnimateMainOut(callback)
    TweenService:Create(MainFrame, TweenInfo.new(0.35, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
        Position = UDim2.new(1, 50, 0.5, -360),
        BackgroundTransparency = 1
    }):Play()
    TweenService:Create(MainStroke, TweenInfo.new(0.2), {Transparency = 1}):Play()
    TweenService:Create(GlowFrame, TweenInfo.new(0.2), {ImageTransparency = 1}):Play()
    task.wait(0.35)
    if callback then callback() end
end

local function AnimateMinimize(min)
    local newSize = min and UDim2.new(0, 470, 0, 65) or UDim2.new(0, 470, 0, 720)
    if min then
        TweenService:Create(ContentFrame, TweenInfo.new(0.1), {BackgroundTransparency = 1}):Play()
        task.wait(0.1)
        ContentFrame.Visible = false
    end
    TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = newSize}):Play()
    if not min then
        task.wait(0.15)
        ContentFrame.Visible = true
    end
end

local function FlashLetters()
    TweenService:Create(LettersSection, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(255, 100, 100)}):Play()
    task.wait(0.15)
    TweenService:Create(LettersSection, TweenInfo.new(0.3), {BackgroundColor3 = Color3.fromRGB(139, 0, 0)}):Play()
end

local function BtnClick(btn)
    local orig = btn.Size
    TweenService:Create(btn, TweenInfo.new(0.08), {
        Size = UDim2.new(orig.X.Scale * 0.92, orig.X.Offset * 0.92, orig.Y.Scale * 0.92, orig.Y.Offset * 0.92)
    }):Play()
    task.wait(0.08)
    TweenService:Create(btn, TweenInfo.new(0.08), {Size = orig}):Play()
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“Œ CORE LOGIC
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function Notify(title, msg, dur)
    pcall(function()
        StarterGui:SetCore("SendNotification", {Title = title or "ğŸ”¥ KIRA", Text = msg, Duration = dur or 3})
    end)
end

-- Draggable
local dragging, dragInput, dragStart, startPos
Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)
Header.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Controls
CloseButton.MouseButton1Click:Connect(function()
    BtnClick(CloseButton)
    AnimateMainOut(function() ScreenGui:Destroy() end)
end)

MinimizeButton.MouseButton1Click:Connect(function()
    BtnClick(MinimizeButton)
    IsMinimized = not IsMinimized
    MinimizeButton.Text = IsMinimized and "+" or "â€”"
    AnimateMinimize(IsMinimized)
end)

-- Toggles
local function UpdateToggle(btn, state)
    TweenService:Create(btn, TweenInfo.new(0.15), {
        BackgroundColor3 = state and Color3.fromRGB(0, 110, 0) or Color3.fromRGB(110, 0, 0)
    }):Play()
    btn.Text = state and "âœ… ON" or "âŒ OFF"
end

AutoTypeToggle.MouseButton1Click:Connect(function()
    BtnClick(AutoTypeToggle)
    AutoTypeEnabled = not AutoTypeEnabled
    UpdateToggle(AutoTypeToggle, AutoTypeEnabled)
    Notify("âš¡ Auto-Type", AutoTypeEnabled and "ENABLED" or "DISABLED", 2)
end)

AutoSuggestToggle.MouseButton1Click:Connect(function()
    BtnClick(AutoSuggestToggle)
    AutoSuggestEnabled = not AutoSuggestEnabled
    UpdateToggle(AutoSuggestToggle, AutoSuggestEnabled)
    Notify("ğŸ’¡ Auto-Suggest", AutoSuggestEnabled and "ENABLED" or "DISABLED", 2)
end)

MeaningfulToggle.MouseButton1Click:Connect(function()
    BtnClick(MeaningfulToggle)
    MeaningfulOnlyMode = not MeaningfulOnlyMode
    UpdateToggle(MeaningfulToggle, MeaningfulOnlyMode)
    Notify("âœ“ Real Words", MeaningfulOnlyMode and "ONLY REAL" or "ALL", 2)
end)

HardWordsToggle.MouseButton1Click:Connect(function()
    BtnClick(HardWordsToggle)
    HardWordsMode = not HardWordsMode
    UpdateToggle(HardWordsToggle, HardWordsMode)
    Notify("ğŸ’€ Hard Words", HardWordsMode and "X,Z,Q,J PRIORITY" or "NORMAL", 2)
end)

-- Speed buttons
local function UpdateSpeedButtons()
    for i, btn in ipairs(SpeedButtons) do
        local isHuman = TYPING_SPEEDS[i].isHuman
        local selectedColor = isHuman and Color3.fromRGB(0, 150, 100) or Color3.fromRGB(139, 0, 0)
        TweenService:Create(btn, TweenInfo.new(0.15), {
            BackgroundColor3 = (i == SelectedSpeedIndex) and selectedColor or Color3.fromRGB(40, 40, 40)
        }):Play()
    end
end
for i, btn in ipairs(SpeedButtons) do
    btn.MouseButton1Click:Connect(function()
        BtnClick(btn)
        SelectedSpeedIndex = i
        UpdateSpeedButtons()
        local speed = TYPING_SPEEDS[i]
        if speed.isHuman then
            Notify("ğŸ§  REAL HUMAN", "Makes typos & corrects them!", 3)
        else
            Notify("âŒ¨ï¸ Speed", speed.name, 2)
        end
    end)
end

-- Delay buttons
local function UpdateDelayButtons()
    for i, btn in ipairs(DelayButtons) do
        TweenService:Create(btn, TweenInfo.new(0.15), {
            BackgroundColor3 = (i == SelectedDelayIndex) and Color3.fromRGB(100, 50, 150) or Color3.fromRGB(40, 40, 40)
        }):Play()
    end
end
for i, btn in ipairs(DelayButtons) do
    btn.MouseButton1Click:Connect(function()
        BtnClick(btn)
        SelectedDelayIndex = i
        UpdateDelayButtons()
        Notify("â±ï¸ Thinking Delay", THINKING_DELAYS[i].name .. " before typing", 2)
    end)
end

-- Range buttons
local function UpdateRangeButtons()
    for i, btn in ipairs(RangeButtons) do
        TweenService:Create(btn, TweenInfo.new(0.15), {
            BackgroundColor3 = (i == SelectedRangeIndex) and Color3.fromRGB(139, 0, 0) or Color3.fromRGB(40, 40, 40)
        }):Play()
    end
end
for i, btn in ipairs(RangeButtons) do
    btn.MouseButton1Click:Connect(function()
        BtnClick(btn)
        SelectedRangeIndex = i
        UpdateRangeButtons()
        Notify("ğŸ“ Range", WordRangeOptions[i].name, 2)
    end)
end

-- Suggestion range buttons
local function UpdateSuggestRangeButtons()
    for i, btn in ipairs(SuggestRangeButtons) do
        TweenService:Create(btn, TweenInfo.new(0.15), {
            BackgroundColor3 = (i == SelectedSuggestionRange) and Color3.fromRGB(0, 100, 150) or Color3.fromRGB(45, 45, 45)
        }):Play()
    end
end
for i, btn in ipairs(SuggestRangeButtons) do
    btn.MouseButton1Click:Connect(function()
        BtnClick(btn)
        SelectedSuggestionRange = i
        UpdateSuggestRangeButtons()
        if currentLetters ~= "" then UpdateSuggestions(currentLetters) end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ§  REAL HUMAN TYPING (Makes mistakes & corrects!)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function GetNearbyKey(char)
    local keyboard = {
        q = {"w", "a", "s"},
        w = {"q", "e", "a", "s", "d"},
        e = {"w", "r", "s", "d", "f"},
        r = {"e", "t", "d", "f", "g"},
        t = {"r", "y", "f", "g", "h"},
        y = {"t", "u", "g", "h", "j"},
        u = {"y", "i", "h", "j", "k"},
        i = {"u", "o", "j", "k", "l"},
        o = {"i", "p", "k", "l"},
        p = {"o", "l"},
        a = {"q", "w", "s", "z", "x"},
        s = {"q", "w", "e", "a", "d", "z", "x", "c"},
        d = {"w", "e", "r", "s", "f", "x", "c", "v"},
        f = {"e", "r", "t", "d", "g", "c", "v", "b"},
        g = {"r", "t", "y", "f", "h", "v", "b", "n"},
        h = {"t", "y", "u", "g", "j", "b", "n", "m"},
        j = {"y", "u", "i", "h", "k", "n", "m"},
        k = {"u", "i", "o", "j", "l", "m"},
        l = {"i", "o", "p", "k"},
        z = {"a", "s", "x"},
        x = {"z", "a", "s", "d", "c"},
        c = {"x", "s", "d", "f", "v"},
        v = {"c", "d", "f", "g", "b"},
        b = {"v", "f", "g", "h", "n"},
        n = {"b", "g", "h", "j", "m"},
        m = {"n", "h", "j", "k"},
    }
    
    local nearby = keyboard[char:lower()]
    if nearby and #nearby > 0 then
        return nearby[math.random(1, #nearby)]
    end
    return char
end

local function AutoTypeWord(word, input)
    local remaining = word:sub(#input + 1)
    local speed = TYPING_SPEEDS[SelectedSpeedIndex]
    local thinkDelay = THINKING_DELAYS[SelectedDelayIndex].delay
    
    task.spawn(function()
        -- THINKING DELAY with anti-ban randomization
        if thinkDelay > 0 then
            LettersSubtext.Text = "ğŸ¤” Thinking... (" .. thinkDelay .. "s)"
            task.wait(thinkDelay + math.random() * 0.2)  -- Random variance for human simulation
        end
        
        LettersSubtext.Text = "âŒ¨ï¸ Typing..."
        
        local cam = workspace.CurrentCamera
        local size = cam.ViewportSize
        local x, y = size.X / 2, size.Y / 2

        -- Click to focus with extra random clicks for anti-ban
        for _ = 1, math.random(3, 5) do  -- Random number of clicks
            VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 1)
            task.wait(math.random(2, 5) / 100)  -- Randomized delay
            VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 1)
            task.wait(math.random(2, 5) / 100)
        end

        local typedChars = {}
        local i = 1
        
        while i <= #remaining do
            local char = remaining:sub(i, i):upper()
            local kc = Enum.KeyCode[char]
            
            -- REAL HUMAN MODE - Make mistakes!
            if speed.isHuman and math.random(1, 100) <= 15 then -- 15% chance of typo
                -- Type wrong character
                local wrongChar = GetNearbyKey(char):upper()
                local wrongKc = Enum.KeyCode[wrongChar]
                
                if wrongKc then
                    -- Type the wrong key
                    VirtualInputManager:SendKeyEvent(true, wrongKc, false, game)
                    task.wait(math.random(speed.randomMin, speed.randomMax) / 100)
                    VirtualInputManager:SendKeyEvent(false, wrongKc, false, game)
                    table.insert(typedChars, wrongChar)
                    
                    -- Pause (realize mistake) with random variance
                    task.wait(math.random(15, 35) / 100 + math.random() * 0.1)
                    
                    -- Delete the mistake
                    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Backspace, false, game)
                    task.wait(0.05 + math.random() * 0.02)
                    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Backspace, false, game)
                    table.remove(typedChars)
                    
                    -- Small pause after correction with variance
                    task.wait(math.random(8, 15) / 100 + math.random() * 0.05)
                end
            end
            
            -- Type correct character
            if kc then
                VirtualInputManager:SendKeyEvent(true, kc, false, game)
                task.wait(math.random(speed.randomMin, speed.randomMax) / 100 + math.random() * 0.01)  -- Extra random for anti-ban
                VirtualInputManager:SendKeyEvent(false, kc, false, game)
                table.insert(typedChars, char)
            end
            
            i = i + 1
        end

        -- Small pause before enter (human hesitation) with random
        if speed.isHuman then
            task.wait(math.random(10, 25) / 100 + math.random() * 0.05)
        else
            task.wait(0.03 + math.random() * 0.01)
        end
        
        -- Press Enter
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
        
        usedWords[word] = true
        table.insert(myWordsHistory, 1, word)
        LettersSubtext.Text = "âœ… Typed: " .. word:upper()
    end)
end

-- Find word
local function FindBestWord(input, minLen, maxLen)
    local candidates = {}
    local hardCandidates = {}
    
    for _, word in ipairs(verifiedWords) do
        if word:sub(1, #input) == input and not usedWords[word] then
            local len = #word
            if len >= minLen and len <= maxLen then
                local valid = not MeaningfulOnlyMode or IsValidMeaningfulWord(word)
                if valid then
                    if HardWordsMode and EndsWithHardLetter(word) then
                        table.insert(hardCandidates, word)
                    else
                        table.insert(candidates, word)
                    end
                end
            end
        end
    end
    
    table.sort(hardCandidates, function(a, b) return #a < #b end)
    table.sort(candidates, function(a, b) return #a < #b end)
    
    if HardWordsMode and #hardCandidates > 0 then
        return hardCandidates[1], true
    end
    return candidates[1], false
end

local function FindAnyWord(input)
    local candidates = {}
    local hardCandidates = {}
    
    for _, word in ipairs(verifiedWords) do
        if word:sub(1, #input) == input and not usedWords[word] then
            local valid = not MeaningfulOnlyMode or IsValidMeaningfulWord(word)
            if valid then
                if HardWordsMode and EndsWithHardLetter(word) then
                    table.insert(hardCandidates, word)
                else
                    table.insert(candidates, word)
                end
            end
        end
    end
    
    table.sort(hardCandidates, function(a, b) return #a < #b end)
    table.sort(candidates, function(a, b) return #a < #b end)
    
    if HardWordsMode and #hardCandidates > 0 then
        return hardCandidates[1], true
    end
    return candidates[1], false
end

-- Word button
local function CreateWordButton(word, index, isHard)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 26)
    btn.BackgroundColor3 = isHard and Color3.fromRGB(50, 20, 50) or Color3.fromRGB(28, 28, 28)
    btn.Text = ""
    btn.LayoutOrder = index
    btn.Parent = SuggestionsList
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 5)

    local stroke = Instance.new("UIStroke")
    stroke.Color = isHard and Color3.fromRGB(150, 50, 150) or Color3.fromRGB(50, 50, 50)
    stroke.Thickness = 1
    stroke.Parent = btn

    local idxLbl = Instance.new("TextLabel")
    idxLbl.Size = UDim2.new(0, 20, 1, 0)
    idxLbl.Position = UDim2.new(0, 5, 0, 0)
    idxLbl.BackgroundTransparency = 1
    idxLbl.Text = "#" .. index
    idxLbl.TextColor3 = Color3.fromRGB(139, 0, 0)
    idxLbl.Font = Enum.Font.GothamBold
    idxLbl.TextSize = 9
    idxLbl.TextXAlignment = Enum.TextXAlignment.Left
    idxLbl.Parent = btn

    local wordLbl = Instance.new("TextLabel")
    wordLbl.Size = UDim2.new(0.5, 0, 1, 0)
    wordLbl.Position = UDim2.new(0, 28, 0, 0)
    wordLbl.BackgroundTransparency = 1
    wordLbl.Text = word:upper()
    wordLbl.TextColor3 = isHard and Color3.fromRGB(255, 150, 255) or Color3.fromRGB(0, 255, 150)
    wordLbl.Font = Enum.Font.GothamBlack
    wordLbl.TextSize = 11
    wordLbl.TextXAlignment = Enum.TextXAlignment.Left
    wordLbl.Parent = btn

    if isHard then
        local badge = Instance.new("TextLabel")
        badge.Size = UDim2.new(0, 16, 0, 12)
        badge.Position = UDim2.new(0.55, 0, 0.5, -6)
        badge.BackgroundColor3 = Color3.fromRGB(150, 50, 150)
        badge.Text = "ğŸ’€"
        badge.TextSize = 8
        badge.Parent = btn
        Instance.new("UICorner", badge).CornerRadius = UDim.new(0, 3)
    end

    local lenLbl = Instance.new("TextLabel")
    lenLbl.Size = UDim2.new(0, 30, 0, 14)
    lenLbl.Position = UDim2.new(1, -40, 0.5, -7)
    lenLbl.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    lenLbl.Text = #word .. "c"
    lenLbl.TextColor3 = Color3.fromRGB(180, 180, 180)
    lenLbl.Font = Enum.Font.GothamBold
    lenLbl.TextSize = 9
    lenLbl.Parent = btn
    Instance.new("UICorner", lenLbl).CornerRadius = UDim.new(0, 3)

    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundColor3 = Color3.fromRGB(139, 0, 0)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.12), {
            BackgroundColor3 = isHard and Color3.fromRGB(50, 20, 50) or Color3.fromRGB(28, 28, 28)
        }):Play()
    end)

    btn.MouseButton1Click:Connect(function()
        BtnClick(btn)
        local prefix = isHard and "ğŸ’€ " or "âœ… "
        Notify(prefix .. word:upper(), #word .. " chars", 2)
        AutoTypeWord(word, currentLetters)
    end)
end

-- Display page
local function DisplayPage()
    for _, c in ipairs(SuggestionsList:GetChildren()) do
        if c:IsA("TextButton") then c:Destroy() end
    end

    local filtered = {}
    local sr = SuggestionRangeOptions[SelectedSuggestionRange]
    for _, word in ipairs(topWords) do
        if #word >= sr.min and #word <= sr.max then
            table.insert(filtered, word)
        end
    end

    local totalPages = math.max(1, math.ceil(#filtered / CONFIG.wordsPerPage))
    currentPage = math.clamp(currentPage, 1, totalPages)

    local startIdx = (currentPage - 1) * CONFIG.wordsPerPage + 1
    local endIdx = math.min(currentPage * CONFIG.wordsPerPage, #filtered)

    for i = startIdx, endIdx do
        if filtered[i] then
            CreateWordButton(filtered[i], i - startIdx + 1, EndsWithHardLetter(filtered[i]))
        end
    end

    PageLabel.Text = "Page " .. currentPage .. "/" .. totalPages
    MatchCountLabel.Text = #filtered .. " found"
    SuggestionsList.CanvasSize = UDim2.new(0, 0, 0, SuggestionsLayout.AbsoluteContentSize.Y + 10)
end

-- Update suggestions
function UpdateSuggestions(input)
    topWords = {}
    input = input:lower():gsub("%s", "")
    currentLetters = input

    if input == "" then
        LettersSubtext.Text = "â³ Waiting for letters..."
        DisplayPage()
        return
    end
    
    LettersSubtext.Text = "ğŸ” Found suggestions below!"

    local hardWords = {}
    local normalWords = {}

    for _, word in ipairs(verifiedWords) do
        if word:sub(1, #input) == input and word ~= input and not usedWords[word] then
            local valid = not MeaningfulOnlyMode or IsValidMeaningfulWord(word)
            if valid then
                if EndsWithHardLetter(word) then
                    table.insert(hardWords, word)
                else
                    table.insert(normalWords, word)
                end
            end
        end
    end

    table.sort(hardWords, function(a, b) return #a < #b end)
    table.sort(normalWords, function(a, b) return #a < #b end)

    if HardWordsMode then
        for _, w in ipairs(hardWords) do table.insert(topWords, w) end
        for _, w in ipairs(normalWords) do table.insert(topWords, w) end
    else
        for _, w in ipairs(normalWords) do table.insert(topWords, w) end
        for _, w in ipairs(hardWords) do table.insert(topWords, w) end
        table.sort(topWords, function(a, b) return #a < #b end)
    end

    currentPage = 1
    DisplayPage()
end

-- Pagination
PrevButton.MouseButton1Click:Connect(function()
    BtnClick(PrevButton)
    if currentPage > 1 then currentPage = currentPage - 1; DisplayPage() end
end)
NextButton.MouseButton1Click:Connect(function()
    BtnClick(NextButton)
    local sr = SuggestionRangeOptions[SelectedSuggestionRange]
    local cnt = 0
    for _, w in ipairs(topWords) do if #w >= sr.min and #w <= sr.max then cnt = cnt + 1 end end
    local tp = math.max(1, math.ceil(cnt / CONFIG.wordsPerPage))
    if currentPage < tp then currentPage = currentPage + 1; DisplayPage() end
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“š DICTIONARY
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function LoadDictionary()
    for _, word in ipairs(VERIFIED_WORDS) do
        if IsValidMeaningfulWord(word:lower()) then table.insert(allWords, word:lower()) end
    end
    
    for _, url in ipairs(DICTIONARY_URLS) do
        pcall(function()
            local content = game:HttpGet(url)
            for word in content:gmatch("[^\r\n]+") do
                word = word:lower():gsub("%s", "")
                if IsValidMeaningfulWord(word) then table.insert(allWords, word) end
            end
        end)
    end
    
    pcall(function()
        local content = game:HttpGet(BACKUP_DICTIONARY)
        local data = HttpService:JSONDecode(content)
        for word, _ in pairs(data) do
            if IsValidMeaningfulWord(word:lower()) then table.insert(allWords, word:lower()) end
        end
    end)
    
    local seen = {}
    verifiedWords = {}
    for _, word in ipairs(allWords) do
        if not seen[word] then seen[word] = true; table.insert(verifiedWords, word) end
    end
    
    Notify("âœ… Loaded", #verifiedWords .. " words!", 3)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ® GAME DETECTION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function ExtractLetters(msg)
    return msg:match("Word:%s*([A-Z][A-Z]?[A-Z]?[A-Z]?)")
end

LogService.MessageOut:Connect(function(message, _)
    if message:find("Word:") then
        local letters = ExtractLetters(message)
        if letters then
            currentLetters = letters:lower()
            CurrentLettersLabel.Text = letters
            FlashLetters()

            if AutoSuggestEnabled then
                UpdateSuggestions(letters)
            end

            if AutoTypeEnabled then
                local range = WordRangeOptions[SelectedRangeIndex]
                local best, isHard = FindBestWord(letters:lower(), range.min, range.max)
                
                if not best then
                    best, isHard = FindAnyWord(letters:lower())
                    if best then Notify("âš ï¸ Fallback", best:upper(), 2) end
                end

                if best then
                    local speed = TYPING_SPEEDS[SelectedSpeedIndex]
                    local prefix = isHard and "ğŸ’€ " or (speed.isHuman and "ğŸ§  " or "âš¡ ")
                    Notify(prefix .. best:upper(), #best .. " chars", 2)
                    AutoTypeWord(best, letters:lower())
                else
                    Notify("âŒ No Word", "Not found!", 2)
                end
            end
        end
    end
end)

-- Round reset
pcall(function()
    local InGame = playerGui:FindFirstChild("InGame")
    if InGame then
        local Frame = InGame:FindFirstChild("Frame")
        if Frame then
            Frame:GetPropertyChangedSignal("Visible"):Connect(function()
                if not Frame.Visible then
                    usedWords = {}
                    myWordsHistory = {}
                    currentLetters = ""
                    CurrentLettersLabel.Text = "---"
                    LettersSubtext.Text = "â³ Waiting for letters..."
                    topWords = {}
                    DisplayPage()
                    Notify("ğŸ”„ Reset", "New round!", 2)
                end
            end)
        end
    end
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸš€ INIT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

task.spawn(LoadDictionary)
AnimateMainIn()
UpdateSpeedButtons()
UpdateDelayButtons()
UpdateRangeButtons()
UpdateSuggestRangeButtons()

task.wait(0.8)
Notify("ğŸ”¥ KIRA [Last Letter] v3.2", "FINAL EDITION Loaded!", 5)

task.wait(2)
Notify("Made by KIRA ğŸ”¥", "YT: @kira_0001 | DC: discord.gg/ZH48pK5wen", 8)

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ”¥ KIRA HUB [Last Letter] v3.2 â€” ABSOLUTE FINAL")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ§  NEW: REAL HUMAN mode (makes typos & corrects!)")
print("â±ï¸ NEW: Thinking Delay (0s, 0.5s, 1s, 2s, 5s)")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ“º YouTube: @kira_0001")
print("ğŸ’¬ Discord: discord.gg/ZH48pK5wen")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

end -- End LoadMainScript

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸš€ START
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

StarterGui:SetCore("SendNotification", {
    Title = "ğŸ”¥ KIRA HUB",
    Text = "Loading Last Letter v3.2...",
    Duration = 5
})

-- Force key system prompt (for testing/fixing skip issue; remove after)
SavedKey = nil  -- Override to nil to always show key GUI

if SavedKey and SavedKey == VALID_KEY then
    KeyVerified = true
    KeyGui:Destroy()
    LoadMainScript()
else
    AnimateKeyPanelIn()
end
